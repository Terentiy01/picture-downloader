{"id":"zPhD","dependencies":[{"name":"A:\\VS CODE\\Projects\\JS\\downloader-picture\\package.json","includedInParent":true,"mtime":1674572151865},{"name":"A:\\VS CODE\\Projects\\JS\\downloader-picture\\node_modules\\@firebase\\storage\\package.json","includedInParent":true,"mtime":1668063699599},{"name":"@firebase/app","loc":{"line":1,"column":87,"index":87},"parent":"A:\\VS CODE\\Projects\\JS\\downloader-picture\\node_modules\\@firebase\\storage\\dist\\index.esm2017.js","resolved":"A:\\VS CODE\\Projects\\JS\\downloader-picture\\node_modules\\@firebase\\app\\dist\\esm\\index.esm2017.js"},{"name":"@firebase/util","loc":{"line":2,"column":114,"index":218},"parent":"A:\\VS CODE\\Projects\\JS\\downloader-picture\\node_modules\\@firebase\\storage\\dist\\index.esm2017.js","resolved":"A:\\VS CODE\\Projects\\JS\\downloader-picture\\node_modules\\@firebase\\util\\dist\\index.esm2017.js"},{"name":"@firebase/component","loc":{"line":3,"column":26,"index":262},"parent":"A:\\VS CODE\\Projects\\JS\\downloader-picture\\node_modules\\@firebase\\storage\\dist\\index.esm2017.js","resolved":"A:\\VS CODE\\Projects\\JS\\downloader-picture\\node_modules\\@firebase\\component\\dist\\esm\\index.esm2017.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports._UploadTask=exports._TaskState=exports._TaskEvent=exports._Location=exports._FbsBlob=exports.StringFormat=void 0,exports._dataFromString=re,exports._getChild=Wt,exports._invalidArgument=y,exports._invalidRootOperation=S,exports.connectStorageEmulator=Kt,exports.deleteObject=Gt,exports.getBlob=Zt,exports.getBytes=Bt,exports.getDownloadURL=$t,exports.getMetadata=Lt,exports.getStorage=Vt,exports.getStream=Jt,exports.list=Ht,exports.listAll=jt,exports.ref=Xt,exports.updateMetadata=Dt,exports.uploadBytes=Nt,exports.uploadBytesResumable=Ft,exports.uploadString=zt;var e=require(\"@firebase/app\"),t=require(\"@firebase/util\"),n=require(\"@firebase/component\");const r=\"firebasestorage.googleapis.com\",s=\"storageBucket\",o=12e4,i=6e5,a=1e3;class u extends t.FirebaseError{constructor(e,t,n=0){super(c(e),`Firebase Storage: ${t} (${c(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,u.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return c(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\\n${this.customData.serverResponse}`:this.message=this._baseMessage}}function c(e){return\"storage/\"+e}function l(){return new u(\"unknown\",\"An unknown error occurred, please check the error payload for server response.\")}function h(e){return new u(\"object-not-found\",\"Object '\"+e+\"' does not exist.\")}function d(e){return new u(\"quota-exceeded\",\"Quota for bucket '\"+e+\"' exceeded, please view quota on https://firebase.google.com/pricing/.\")}function p(){return new u(\"unauthenticated\",\"User is not authenticated, please authenticate using Firebase Authentication and try again.\")}function _(){return new u(\"unauthorized-app\",\"This app does not have permission to access Firebase Storage on this project.\")}function f(e){return new u(\"unauthorized\",\"User does not have permission to access '\"+e+\"'.\")}function g(){return new u(\"retry-limit-exceeded\",\"Max retry time for operation exceeded, please try again.\")}function m(){return new u(\"canceled\",\"User canceled the upload/download.\")}function b(e){return new u(\"invalid-url\",\"Invalid URL '\"+e+\"'.\")}function w(e){return new u(\"invalid-default-bucket\",\"Invalid default bucket '\"+e+\"'.\")}function k(){return new u(\"no-default-bucket\",\"No default bucket found. Did you set the '\"+s+\"' property when initializing the app?\")}function v(){return new u(\"cannot-slice-blob\",\"Cannot slice blob for upload. Please retry the upload.\")}function R(){return new u(\"server-file-wrong-size\",\"Server recorded incorrect upload file size, please retry the upload.\")}function T(){return new u(\"no-download-url\",\"The given file does not have any download URLs.\")}function y(e){return new u(\"invalid-argument\",e)}function x(){return new u(\"app-deleted\",\"The Firebase app was deleted.\")}function S(e){return new u(\"invalid-root-operation\",\"The operation '\"+e+\"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').\")}function U(e,t){return new u(\"invalid-format\",\"String does not match format '\"+e+\"': \"+t)}function C(e){throw new u(\"internal-error\",\"Internal error: \"+e)}class E{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return\"/b/\"+e(this.bucket)+\"/o/\"+e(this.path)}bucketOnlyServerUrl(){return\"/b/\"+encodeURIComponent(this.bucket)+\"/o\"}static makeFromBucketSpec(e,t){let n;try{n=E.makeFromUrl(e,t)}catch(r){return new E(e,\"\")}if(\"\"===n.path)return n;throw w(e)}static makeFromUrl(e,t){let n=null;const s=new RegExp(\"^gs://([A-Za-z0-9.\\\\-_]+)(/(.*))?$\",\"i\");function o(e){e.path_=decodeURIComponent(e.path)}const i=t.replace(/[.]/g,\"\\\\.\"),a=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){\"/\"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${i}/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\\\-_]+)/o(/([^?#]*).*)?$`,\"i\"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp(`^https?://${t===r?\"(?:storage.googleapis.com|storage.cloud.google.com)\":t}/([A-Za-z0-9.\\\\-_]+)/([^?#]*)`,\"i\"),indices:{bucket:1,path:2},postModify:o}];for(let r=0;r<a.length;r++){const t=a[r],s=t.regex.exec(e);if(s){const e=s[t.indices.bucket];let r=s[t.indices.path];r||(r=\"\"),n=new E(e,r),t.postModify(n);break}}if(null==n)throw b(e);return n}}exports._Location=E;class O{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function P(e,t,n){let r=1,s=null,o=null,i=!1,a=0;function u(){return 2===a}let c=!1;function l(...e){c||(c=!0,t.apply(null,e))}function h(t){s=setTimeout(()=>{s=null,e(p,u())},t)}function d(){o&&clearTimeout(o)}function p(e,...t){if(c)return void d();if(e)return d(),void l.call(null,e,...t);if(u()||i)return d(),void l.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let _=!1;function f(e){_||(_=!0,d(),c||(null!==s?(e||(a=2),clearTimeout(s),h(0)):e||(a=1)))}return h(0),o=setTimeout(()=>{i=!0,f(!0)},n),f}function A(e){e(!1)}function I(e){return void 0!==e}function M(e){return\"function\"==typeof e}function q(e){return\"object\"==typeof e&&!Array.isArray(e)}function B(e){return\"string\"==typeof e||e instanceof String}function N(e){return z()&&e instanceof Blob}function z(){return\"undefined\"!=typeof Blob&&!(0,t.isNode)()}function F(e,t,n,r){if(r<t)throw y(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw y(`Invalid value for '${e}'. Expected ${n} or less.`)}function L(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function D(e){const t=encodeURIComponent;let n=\"?\";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+\"=\"+t(e[r]))+\"&\"}return n=n.slice(0,-1)}var H;function j(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]=\"NO_ERROR\",e[e.NETWORK_ERROR=1]=\"NETWORK_ERROR\",e[e.ABORT=2]=\"ABORT\"}(H||(H={}));class ${constructor(e,t,n,r,s,o,i,a,u,c,l,h=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=i,this.errorCallback_=a,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=l,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new G(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===H.NO_ERROR,s=n.getStatus();if((!t||j(s,this.additionalRetryCodes_))&&this.retry){const t=n.getErrorCode()===H.ABORT;return void e(!1,new G(!1,null,t))}const o=-1!==this.successCodes_.indexOf(s);e(!0,new G(o,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());I(e)?n(e):n()}catch(o){r(o)}else if(null!==s){const e=l();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?x():m())}else{r(g())}};this.canceled_?t(0,new G(!1,null,!0)):this.backoffId_=P(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&A(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class G{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function X(e,t){null!==t&&t.length>0&&(e.Authorization=\"Firebase \"+t)}function W(e,t){e[\"X-Firebase-Storage-Version\"]=\"webjs/\"+(null!=t?t:\"AppManager\")}function V(e,t){t&&(e[\"X-Firebase-GMPID\"]=t)}function K(e,t){null!==t&&(e[\"X-Firebase-AppCheck\"]=t)}function Z(e,t,n,r,s,o,i=!0){const a=D(e.urlParams),u=e.url+a,c=Object.assign({},e.headers);return V(c,t),X(c,n),W(c,o),K(c,r),new $(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,i)}function J(){return\"undefined\"!=typeof BlobBuilder?BlobBuilder:\"undefined\"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Y(...e){const t=J();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(z())return new Blob(e);throw new u(\"unsupported-environment\",\"This browser doesn't seem to support creating Blobs\")}function Q(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}function ee(e){return atob(e)}const te={RAW:\"raw\",BASE64:\"base64\",BASE64URL:\"base64url\",DATA_URL:\"data_url\"};exports.StringFormat=te;class ne{constructor(e,t){this.data=e,this.contentType=t||null}}function re(e,t){switch(e){case te.RAW:return new ne(se(t));case te.BASE64:case te.BASE64URL:return new ne(ie(e,t));case te.DATA_URL:return new ne(ue(t),ce(t))}throw l()}function se(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function oe(e){let t;try{t=decodeURIComponent(e)}catch(n){throw U(te.DATA_URL,\"Malformed data URL.\")}return se(t)}function ie(e,t){switch(e){case te.BASE64:{const n=-1!==t.indexOf(\"-\"),r=-1!==t.indexOf(\"_\");if(n||r){throw U(e,\"Invalid character '\"+(n?\"-\":\"_\")+\"' found: is it base64url encoded?\")}break}case te.BASE64URL:{const n=-1!==t.indexOf(\"+\"),r=-1!==t.indexOf(\"/\");if(n||r){throw U(e,\"Invalid character '\"+(n?\"+\":\"/\")+\"' found: is it base64 encoded?\")}t=t.replace(/-/g,\"+\").replace(/_/g,\"/\");break}}let n;try{n=ee(t)}catch(s){throw U(e,\"Invalid character found\")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class ae{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw U(te.DATA_URL,\"Must be formatted 'data:[<mediatype>][;base64],<data>\");const n=t[1]||null;null!=n&&(this.base64=le(n,\";base64\"),this.contentType=this.base64?n.substring(0,n.length-\";base64\".length):n),this.rest=e.substring(e.indexOf(\",\")+1)}}function ue(e){const t=new ae(e);return t.base64?ie(te.BASE64,t.rest):oe(t.rest)}function ce(e){return new ae(e).contentType}function le(e,t){return!!(e.length>=t.length)&&e.substring(e.length-t.length)===t}class he{constructor(e,t){let n=0,r=\"\";N(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(N(this.data_)){const n=Q(this.data_,e,t);return null===n?null:new he(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new he(n,!0)}}static getBlob(...e){if(z()){const t=e.map(e=>e instanceof he?e.data_:e);return new he(Y.apply(null,t))}{const t=e.map(e=>B(e)?re(te.RAW,e).data:e.data_);let n=0;t.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new he(r,!0)}}uploadData(){return this.data_}}function de(e){let t;try{t=JSON.parse(e)}catch(n){return null}return q(t)?t:null}function pe(e){if(0===e.length)return null;const t=e.lastIndexOf(\"/\");return-1===t?\"\":e.slice(0,t)}function _e(e,t){const n=t.split(\"/\").filter(e=>e.length>0).join(\"/\");return 0===e.length?n:e+\"/\"+n}function fe(e){const t=e.lastIndexOf(\"/\",e.length-2);return-1===t?e:e.slice(t+1)}function ge(e,t){return t}exports._FbsBlob=he;class me{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||ge}}let be=null;function we(e){return!B(e)||e.length<2?e:fe(e)}function ke(){if(be)return be;const e=[];e.push(new me(\"bucket\")),e.push(new me(\"generation\")),e.push(new me(\"metageneration\")),e.push(new me(\"name\",\"fullPath\",!0));const t=new me(\"name\");t.xform=function(e,t){return we(t)},e.push(t);const n=new me(\"size\");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new me(\"timeCreated\")),e.push(new me(\"updated\")),e.push(new me(\"md5Hash\",null,!0)),e.push(new me(\"cacheControl\",null,!0)),e.push(new me(\"contentDisposition\",null,!0)),e.push(new me(\"contentEncoding\",null,!0)),e.push(new me(\"contentLanguage\",null,!0)),e.push(new me(\"contentType\",null,!0)),e.push(new me(\"metadata\",\"customMetadata\",!0)),be=e}function ve(e,t){Object.defineProperty(e,\"ref\",{get:function(){const n=e.bucket,r=e.fullPath,s=new E(n,r);return t._makeStorageReference(s)}})}function Re(e,t,n){const r={type:\"file\"},s=n.length;for(let o=0;o<s;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return ve(r,e),r}function Te(e,t,n){const r=de(t);return null===r?null:Re(e,r,n)}function ye(e,t,n,r){const s=de(t);if(null===s)return null;if(!B(s.downloadTokens))return null;const o=s.downloadTokens;if(0===o.length)return null;const i=encodeURIComponent;return o.split(\",\").map(t=>{const s=e.bucket,o=e.fullPath;return L(\"/b/\"+i(s)+\"/o/\"+i(o),n,r)+D({alt:\"media\",token:t})})[0]}function xe(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const Se=\"prefixes\",Ue=\"items\";function Ce(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Se])for(const s of n[Se]){const n=s.replace(/\\/$/,\"\"),o=e._makeStorageReference(new E(t,n));r.prefixes.push(o)}if(n[Ue])for(const s of n[Ue]){const n=e._makeStorageReference(new E(t,s.name));r.items.push(n)}return r}function Ee(e,t,n){const r=de(n);return null===r?null:Ce(e,t,r)}class Oe{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Pe(e){if(!e)throw l()}function Ae(e,t){return function(n,r){const s=Te(e,r,t);return Pe(null!==s),s}}function Ie(e,t){return function(n,r){const s=Ee(e,t,r);return Pe(null!==s),s}}function Me(e,t){return function(n,r){const s=Te(e,r,t);return Pe(null!==s),ye(s,r,e.host,e._protocol)}}function qe(e){return function(t,n){let r;return(r=401===t.getStatus()?t.getErrorText().includes(\"Firebase App Check token is invalid\")?_():p():402===t.getStatus()?d(e.bucket):403===t.getStatus()?f(e.path):n).status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Be(e){const t=qe(e);return function(n,r){let s=t(n,r);return 404===n.getStatus()&&(s=h(e.path)),s.serverResponse=r.serverResponse,s}}function Ne(e,t,n){const r=L(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,o=new Oe(r,\"GET\",Ae(e,n),s);return o.errorHandler=Be(t),o}function ze(e,t,n,r,s){const o={};t.isRoot?o.prefix=\"\":o.prefix=t.path+\"/\",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),s&&(o.maxResults=s);const i=L(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,u=new Oe(i,\"GET\",Ie(e,t.bucket),a);return u.urlParams=o,u.errorHandler=qe(t),u}function Fe(e,t,n){const r=L(t.fullServerUrl(),e.host,e._protocol)+\"?alt=media\",s=e.maxOperationRetryTime,o=new Oe(r,\"GET\",(e,t)=>t,s);return o.errorHandler=Be(t),void 0!==n&&(o.headers.Range=`bytes=0-${n}`,o.successCodes=[200,206]),o}function Le(e,t,n){const r=L(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,o=new Oe(r,\"GET\",Me(e,n),s);return o.errorHandler=Be(t),o}function De(e,t,n,r){const s=L(t.fullServerUrl(),e.host,e._protocol),o=xe(n,r),i=e.maxOperationRetryTime,a=new Oe(s,\"PATCH\",Ae(e,r),i);return a.headers={\"Content-Type\":\"application/json; charset=utf-8\"},a.body=o,a.errorHandler=Be(t),a}function He(e,t){const n=L(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime;const s=new Oe(n,\"DELETE\",function(e,t){},r);return s.successCodes=[200,204],s.errorHandler=Be(t),s}function je(e,t){return e&&e.contentType||t&&t.type()||\"application/octet-stream\"}function $e(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=je(null,t)),r}function Ge(e,t,n,r,s){const o=t.bucketOnlyServerUrl(),i={\"X-Goog-Upload-Protocol\":\"multipart\"};const a=function(){let e=\"\";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();i[\"Content-Type\"]=\"multipart/related; boundary=\"+a;const u=$e(t,r,s),c=\"--\"+a+\"\\r\\nContent-Type: application/json; charset=utf-8\\r\\n\\r\\n\"+xe(u,n)+\"\\r\\n--\"+a+\"\\r\\nContent-Type: \"+u.contentType+\"\\r\\n\\r\\n\",l=\"\\r\\n--\"+a+\"--\",h=he.getBlob(c,r,l);if(null===h)throw v();const d={name:u.fullPath},p=L(o,e.host,e._protocol),_=e.maxUploadRetryTime,f=new Oe(p,\"POST\",Ae(e,n),_);return f.urlParams=d,f.headers=i,f.body=h.uploadData(),f.errorHandler=qe(t),f}class Xe{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function We(e,t){let n=null;try{n=e.getResponseHeader(\"X-Goog-Upload-Status\")}catch(r){Pe(!1)}return Pe(!!n&&-1!==(t||[\"active\"]).indexOf(n)),n}function Ve(e,t,n,r,s){const o=t.bucketOnlyServerUrl(),i=$e(t,r,s),a={name:i.fullPath},u=L(o,e.host,e._protocol),c={\"X-Goog-Upload-Protocol\":\"resumable\",\"X-Goog-Upload-Command\":\"start\",\"X-Goog-Upload-Header-Content-Length\":`${r.size()}`,\"X-Goog-Upload-Header-Content-Type\":i.contentType,\"Content-Type\":\"application/json; charset=utf-8\"},l=xe(i,n),h=e.maxUploadRetryTime;const d=new Oe(u,\"POST\",function(e){let t;We(e);try{t=e.getResponseHeader(\"X-Goog-Upload-URL\")}catch(n){Pe(!1)}return Pe(B(t)),t},h);return d.urlParams=a,d.headers=c,d.body=l,d.errorHandler=qe(t),d}function Ke(e,t,n,r){const s=e.maxUploadRetryTime,o=new Oe(n,\"POST\",function(e){const t=We(e,[\"active\",\"final\"]);let n=null;try{n=e.getResponseHeader(\"X-Goog-Upload-Size-Received\")}catch(o){Pe(!1)}n||Pe(!1);const s=Number(n);return Pe(!isNaN(s)),new Xe(s,r.size(),\"final\"===t)},s);return o.headers={\"X-Goog-Upload-Command\":\"query\"},o.errorHandler=qe(t),o}const Ze=262144;function Je(e,t,n,r,s,o,i,a){const u=new Xe(0,0);if(i?(u.current=i.current,u.total=i.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw R();const c=u.total-u.current;let l=c;s>0&&(l=Math.min(l,s));const h=u.current,d=h+l;let p=\"\";const _={\"X-Goog-Upload-Command\":p=0===l?\"finalize\":c===l?\"upload, finalize\":\"upload\",\"X-Goog-Upload-Offset\":`${u.current}`},f=r.slice(h,d);if(null===f)throw v();const g=t.maxUploadRetryTime,m=new Oe(n,\"POST\",function(e,n){const s=We(e,[\"active\",\"final\"]),i=u.current+l,a=r.size();let c;return c=\"final\"===s?Ae(t,o)(e,n):null,new Xe(i,a,\"final\"===s,c)},g);return m.headers=_,m.body=f.uploadData(),m.progressCallback=a||null,m.errorHandler=qe(e),m}const Ye={STATE_CHANGED:\"state_changed\"};exports._TaskEvent=Ye;const Qe={RUNNING:\"running\",PAUSED:\"paused\",SUCCESS:\"success\",CANCELED:\"canceled\",ERROR:\"error\"};function et(e){switch(e){case\"running\":case\"pausing\":case\"canceling\":return Qe.RUNNING;case\"paused\":return Qe.PAUSED;case\"success\":return Qe.SUCCESS;case\"canceled\":return Qe.CANCELED;case\"error\":default:return Qe.ERROR}}exports._TaskState=Qe;class tt{constructor(e,t,n){if(M(e)||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function nt(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}let rt=null;class st{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=H.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener(\"abort\",()=>{this.errorCode_=H.ABORT,e()}),this.xhr_.addEventListener(\"error\",()=>{this.errorCode_=H.NETWORK_ERROR,e()}),this.xhr_.addEventListener(\"load\",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw C(\"cannot .send() more than once\");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw C(\"cannot .getErrorCode() before sending\");return this.errorCode_}getStatus(){if(!this.sent_)throw C(\"cannot .getStatus() before sending\");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw C(\"cannot .getResponse() before sending\");return this.xhr_.response}getErrorText(){if(!this.sent_)throw C(\"cannot .getErrorText() before sending\");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener(\"progress\",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener(\"progress\",e)}}class ot extends st{initXhr(){this.xhr_.responseType=\"text\"}}function it(){return rt?rt():new ot}class at extends st{initXhr(){this.xhr_.responseType=\"arraybuffer\"}}function ut(){return new at}class ct extends st{initXhr(){this.xhr_.responseType=\"blob\"}}function lt(){return new ct}class ht{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=ke(),this._resumable=this._shouldDoResumable(this._blob),this._state=\"running\",this._errorHandler=(e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(\"canceled\"))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(j(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,a),this._needToFetchStatus=!0,void this.completeTransitions_();e=g()}this._error=e,this._transition(\"error\")}}),this._metadataErrorHandler=(e=>{this._request=void 0,e._codeEquals(\"canceled\")?this.completeTransitions_():(this._error=e,this._transition(\"error\"))}),this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){\"running\"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case\"running\":e(t,n);break;case\"canceling\":this._transition(\"canceled\");break;case\"pausing\":this._transition(\"paused\")}})}_createResumable(){this._resolveToken((e,t)=>{const n=Ve(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,it,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const r=Ke(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,it,t,n);this._request=s,s.getPromise().then(e=>{e=e,this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ze*this._chunkMultiplier,t=new Xe(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=Je(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition(\"error\")}const i=this._ref.storage._makeRequest(o,it,r,s,!1);this._request=i,i.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition(\"success\")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){2*(Ze*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=Ne(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,it,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition(\"success\")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=Ge(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,it,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition(\"success\")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case\"canceling\":case\"pausing\":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case\"running\":const t=\"paused\"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case\"paused\":this._state=e,this._notifyObservers();break;case\"canceled\":this._error=m(),this._state=e,this._notifyObservers();break;case\"error\":case\"success\":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case\"pausing\":this._transition(\"paused\");break;case\"canceling\":this._transition(\"canceled\");break;case\"running\":this._start()}}get snapshot(){const e=et(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const s=new tt(t||void 0,n||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(et(this._state)){case Qe.SUCCESS:nt(this._resolve.bind(null,this.snapshot))();break;case Qe.CANCELED:case Qe.ERROR:nt(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(et(this._state)){case Qe.RUNNING:case Qe.PAUSED:e.next&&nt(e.next.bind(e,this.snapshot))();break;case Qe.SUCCESS:e.complete&&nt(e.complete.bind(e))();break;case Qe.CANCELED:case Qe.ERROR:e.error&&nt(e.error.bind(e,this._error))();break;default:e.error&&nt(e.error.bind(e,this._error))()}}resume(){const e=\"paused\"===this._state||\"pausing\"===this._state;return e&&this._transition(\"running\"),e}pause(){const e=\"running\"===this._state;return e&&this._transition(\"pausing\"),e}cancel(){const e=\"running\"===this._state||\"pausing\"===this._state;return e&&this._transition(\"canceling\"),e}}exports._UploadTask=ht;class dt{constructor(e,t){this._service=e,this._location=t instanceof E?t:E.makeFromUrl(t,e.host)}toString(){return\"gs://\"+this._location.bucket+\"/\"+this._location.path}_newRef(e,t){return new dt(e,t)}get root(){const e=new E(this._location.bucket,\"\");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fe(this._location.path)}get storage(){return this._service}get parent(){const e=pe(this._location.path);if(null===e)return null;const t=new E(this._location.bucket,e);return new dt(this._service,t)}_throwIfRoot(e){if(\"\"===this._location.path)throw S(e)}}function pt(e,t){e._throwIfRoot(\"getBytes\");const n=Fe(e.storage,e._location,t);return e.storage.makeRequestWithTokens(n,ut).then(e=>void 0!==t?e.slice(0,t):e)}function _t(e,t){e._throwIfRoot(\"getBlob\");const n=Fe(e.storage,e._location,t);return e.storage.makeRequestWithTokens(n,lt).then(e=>void 0!==t?e.slice(0,t):e)}function ft(e,t,n){e._throwIfRoot(\"uploadBytes\");const r=Ge(e.storage,e._location,ke(),new he(t,!0),n);return e.storage.makeRequestWithTokens(r,it).then(t=>({metadata:t,ref:e}))}function gt(e,t,n){return e._throwIfRoot(\"uploadBytesResumable\"),new ht(e,new he(t),n)}function mt(e,t,n=te.RAW,r){e._throwIfRoot(\"uploadString\");const s=re(n,t),o=Object.assign({},r);return null==o.contentType&&null!=s.contentType&&(o.contentType=s.contentType),ft(e,s.data,o)}function bt(e){const t={prefixes:[],items:[]};return wt(e,t).then(()=>t)}async function wt(e,t,n){const r={pageToken:n},s=await kt(e,r);t.prefixes.push(...s.prefixes),t.items.push(...s.items),null!=s.nextPageToken&&await wt(e,t,s.nextPageToken)}function kt(e,t){null!=t&&\"number\"==typeof t.maxResults&&F(\"options.maxResults\",1,1e3,t.maxResults);const n=t||{},r=ze(e.storage,e._location,\"/\",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,it)}function vt(e){e._throwIfRoot(\"getMetadata\");const t=Ne(e.storage,e._location,ke());return e.storage.makeRequestWithTokens(t,it)}function Rt(e,t){e._throwIfRoot(\"updateMetadata\");const n=De(e.storage,e._location,t,ke());return e.storage.makeRequestWithTokens(n,it)}function Tt(e){e._throwIfRoot(\"getDownloadURL\");const t=Le(e.storage,e._location,ke());return e.storage.makeRequestWithTokens(t,it).then(e=>{if(null===e)throw T();return e})}function yt(e){e._throwIfRoot(\"deleteObject\");const t=He(e.storage,e._location);return e.storage.makeRequestWithTokens(t,it)}function xt(e,t){const n=_e(e._location.path,t),r=new E(e._location.bucket,n);return new dt(e.storage,r)}function St(e){return/^[A-Za-z]+:\\/\\//.test(e)}function Ut(e,t){return new dt(e,t)}function Ct(e,t){if(e instanceof At){const n=e;if(null==n._bucket)throw k();const r=new dt(n,n._bucket);return null!=t?Ct(r,t):r}return void 0!==t?xt(e,t):e}function Et(e,t){if(t&&St(t)){if(e instanceof At)return Ut(e,t);throw y(\"To use ref(service, url), the first argument must be a Storage instance.\")}return Ct(e,t)}function Ot(e,t){const n=null==t?void 0:t[s];return null==n?null:E.makeFromBucketSpec(n,e)}function Pt(e,n,r,s={}){e.host=`${n}:${r}`,e._protocol=\"http\";const{mockUserToken:o}=s;o&&(e._overrideAuthToken=\"string\"==typeof o?o:(0,t.createMockUserToken)(o,e.app.options.projectId))}class At{constructor(e,t,n,s,a){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=r,this._protocol=\"https\",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=o,this._maxUploadRetryTime=i,this._requests=new Set,this._bucket=null!=s?E.makeFromBucketSpec(s,this._host):Ot(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=E.makeFromBucketSpec(this._url,e):this._bucket=Ot(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){F(\"time\",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){F(\"time\",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dt(this,e)}_makeRequest(e,t,n,r,s=!0){if(this._deleted)return new O(x());{const o=Z(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const It=\"@firebase/storage\",Mt=\"0.9.13\",qt=\"storage\";function Bt(e,n){return pt(e=(0,t.getModularInstance)(e),n)}function Nt(e,n,r){return ft(e=(0,t.getModularInstance)(e),n,r)}function zt(e,n,r,s){return mt(e=(0,t.getModularInstance)(e),n,r,s)}function Ft(e,n,r){return gt(e=(0,t.getModularInstance)(e),n,r)}function Lt(e){return vt(e=(0,t.getModularInstance)(e))}function Dt(e,n){return Rt(e=(0,t.getModularInstance)(e),n)}function Ht(e,n){return kt(e=(0,t.getModularInstance)(e),n)}function jt(e){return bt(e=(0,t.getModularInstance)(e))}function $t(e){return Tt(e=(0,t.getModularInstance)(e))}function Gt(e){return yt(e=(0,t.getModularInstance)(e))}function Xt(e,n){return Et(e=(0,t.getModularInstance)(e),n)}function Wt(e,t){return xt(e,t)}function Vt(n=(0,e.getApp)(),r){n=(0,t.getModularInstance)(n);const s=(0,e._getProvider)(n,qt).getImmediate({identifier:r}),o=(0,t.getDefaultEmulatorHostnameAndPort)(\"storage\");return o&&Kt(s,...o),s}function Kt(e,t,n,r={}){Pt(e,t,n,r)}function Zt(e,n){return _t(e=(0,t.getModularInstance)(e),n)}function Jt(e,t){throw new Error(\"getStream() is only supported by NodeJS builds\")}function Yt(t,{instanceIdentifier:n}){const r=t.getProvider(\"app\").getImmediate(),s=t.getProvider(\"auth-internal\"),o=t.getProvider(\"app-check-internal\");return new At(r,s,o,n,e.SDK_VERSION)}function Qt(){(0,e._registerComponent)(new n.Component(qt,Yt,\"PUBLIC\").setMultipleInstances(!0)),(0,e.registerVersion)(It,Mt,\"\"),(0,e.registerVersion)(It,Mt,\"esm2017\")}Qt();"},"sourceMaps":null,"error":null,"hash":"9f6bac00414e97969bc793af7fa9b9e2","cacheData":{"env":{}}}